# Agent Spy Environment Configuration
# Copy this file to .env and customize the values for your deployment

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================

# Environment: development, staging, production
ENVIRONMENT=production

# Enable debug mode (true/false)
DEBUG=false

# =============================================================================
# DATABASE SETTINGS
# =============================================================================

# Database type: sqlite or postgresql
DATABASE_TYPE=sqlite

# Database connection URL (overrides component-based configuration)
# For SQLite: sqlite+aiosqlite:///./agentspy.db
# For PostgreSQL: postgresql+asyncpg://user:pass@host:port/dbname
DATABASE_URL=sqlite+aiosqlite:///./agentspy.db

# Database echo (log SQL queries)
DATABASE_ECHO=false

# =============================================================================
# DATABASE SETTINGS (used when DATABASE_TYPE=postgresql)
# =============================================================================

# Database connection settings
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_NAME=agentspy
DATABASE_USER=agentspy_user
DATABASE_PASSWORD=agentspy_password

# PostgreSQL SSL mode: disable, allow, prefer, require, verify-ca, verify-full
DATABASE_SSL_MODE=prefer

# PostgreSQL connection pool settings
DATABASE_POOL_SIZE=20
DATABASE_MAX_CONNECTIONS=20

# =============================================================================
# POSTGRESQL DOCKER SETTINGS
# =============================================================================

# PostgreSQL container settings (for Docker deployments)
POSTGRES_DB=agentspy
POSTGRES_USER=agentspy_user
POSTGRES_PASSWORD=agentspy_password
POSTGRES_PORT=5432

# =============================================================================
# API SETTINGS
# =============================================================================

# Authentication settings
REQUIRE_AUTH=false
# Comma-separated list of valid API keys (if auth is enabled)
API_KEYS=your-api-key-1,your-api-key-2

# =============================================================================
# BACKEND SERVER CONFIGURATION
# =============================================================================

# Backend server host (internal container configuration - fixed)
HOST=0.0.0.0

# =============================================================================
# EXTERNAL PORT MAPPING
# =============================================================================

# External port mapping for Docker containers
BACKEND_EXTERNAL_PORT=8000
FRONTEND_EXTERNAL_PORT=3000
OTLP_EXTERNAL_PORT=4317

# Backend hostname for frontend to connect to (used in Docker)
BACKEND_HOST=localhost

# =============================================================================
# API CONFIGURATION
# =============================================================================

# Base URL for API endpoints (used by frontend to connect to backend)
# These are automatically constructed from BACKEND_HOST and BACKEND_EXTERNAL_PORT
API_URL_BASE=http://localhost:8000/api/v1
API_WS_URL=ws://localhost:8000/ws

# =============================================================================
# OTLP SETTINGS
# =============================================================================

# OTLP HTTP receiver settings (shares main API port 8000)
OTLP_HTTP_ENABLED=true
OTLP_HTTP_PATH=/v1/traces

# OTLP gRPC receiver settings (dedicated port) - Using BACKEND_OTLP_* prefix
OTLP_GRPC_ENABLED=true
BACKEND_OTLP_GRPC_HOST=0.0.0.0
BACKEND_OTLP_GRPC_PORT=4317



# =============================================================================
# CORS SETTINGS
# =============================================================================

# Comma-separated list of allowed origins
CORS_ORIGINS=http://localhost:3000,http://localhost:80,https://yourdomain.com
CORS_CREDENTIALS=true

# =============================================================================
# PERFORMANCE SETTINGS
# =============================================================================

# Maximum trace size in MB
MAX_TRACE_SIZE_MB=10

# Request timeout in seconds
REQUEST_TIMEOUT=30

# =============================================================================
# LOGGING SETTINGS
# =============================================================================

# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Log format: json, text
LOG_FORMAT=json

# =============================================================================
# DEVELOPMENT SETTINGS
# =============================================================================
# These settings are used by docker-compose.dev.yml

# Development external ports (different from production to avoid conflicts)
# Note: Internal ports are fixed (backend: 8000, frontend: 3000 for dev, 80 for prod)
BACKEND_EXTERNAL_PORT=8001
FRONTEND_EXTERNAL_PORT=3000
